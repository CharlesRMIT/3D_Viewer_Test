<script>
    function selectModel() {
      const returnUrl = new URLSearchParams(window.location.search).get("content_item_return_url");
  
      if (!returnUrl) {
        alert("This tool was not launched via deep linking. Cannot embed.");
        return;
      }
  
      const iframeHtml = `<iframe src="https://3dviewertest-production.up.railway.app/viewer.html" width="800" height="600" allowfullscreen></iframe>`;
  
      const contentItem = {
        "@context": "http://purl.imsglobal.org/ctx/lti/v1/ContentItem",
        "@graph": [
          {
            "@type": "ContentItem",
            "mediaType": "text/html",
            "text": iframeHtml
          }
        ]
      };
  
      const form = document.createElement("form");
      form.method = "POST";
      form.action = returnUrl;
  
      const contentInput = document.createElement("input");
      contentInput.type = "hidden";
      contentInput.name = "content_items";
      contentInput.value = JSON.stringify(contentItem);
      form.appendChild(contentInput);
  
      const messageInput = document.createElement("input");
      messageInput.type = "hidden";
      messageInput.name = "lti_message_type";
      messageInput.value = "ContentItemSelection";
      form.appendChild(messageInput);
  
      const versionInput = document.createElement("input");
      versionInput.type = "hidden";
      versionInput.name = "lti_version";
      versionInput.value = "LTI-1p0";
      form.appendChild(versionInput);
  
      document.body.appendChild(form);
      form.submit();
    }
  
    if (window !== window.parent) {
      document.getElementById("insertBtn").style.display = "block";
    }
  </script>
  